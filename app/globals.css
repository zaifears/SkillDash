@tailwind base;
@tailwind components;
@tailwind utilities;

/* ✅ OPTIMIZED: Font loading and performance optimizations */
:root {
  --font-inter: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
}

/* ✅ OPTIMIZED: Improved font rendering */
html {
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* ✅ OPTIMIZED: System font fallbacks */
body {
  font-family: var(--font-inter);
  font-feature-settings: 'rlig' 1, 'calt' 1;
}

/* Custom base styles for dark mode */
html {
  background-color: white;
}

@media (prefers-color-scheme: dark) {
  html {
    background-color: #111827; /* gray-900 */
  }
}

body {
  background-color: inherit;
  color: #111827; /* gray-900 */
  transition: background-color 0.3s ease, color 0.3s ease;
}

@media (prefers-color-scheme: dark) {
  body {
    color: #f9fafb; /* gray-50 */
  }
}

/* ✅ OPTIMIZED: Custom scrollbar styling */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background-color: #f3f4f6; /* gray-100 */
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-track {
    background-color: #1f2937; /* gray-800 */
  }
}

::-webkit-scrollbar-thumb {
  background-color: #d1d5db; /* gray-300 */
  border-radius: 9999px;
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-thumb {
    background-color: #4b5563; /* gray-600 */
  }
}

::-webkit-scrollbar-thumb:hover {
  background-color: #9ca3af; /* gray-400 */
}

@media (prefers-color-scheme: dark) {
  ::-webkit-scrollbar-thumb:hover {
    background-color: #6b7280; /* gray-500 */
  }
}

/* ✅ OPTIMIZED: Reduced motion for performance */
@media (prefers-reduced-motion: reduce) {
  *,
  ::before,
  ::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* ✅ OPTIMIZED: Performance-focused animations */
.animate-fade-in-up {
  animation: fade-in-up 0.6s ease-out forwards;
}

@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ✅ OPTIMIZED: Faster pulse animation */
.animate-optimized-pulse {
  animation: optimized-pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

@keyframes optimized-pulse {
  0%, 100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.8;
  }
}

/* ✅ OPTIMIZED: Bounce animation for background elements */
.animate-optimized-bounce {
  animation: optimized-bounce 6s ease-in-out infinite;
}

@keyframes optimized-bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(-10px);
  }
  60% {
    transform: translateY(-5px);
  }
}

/* ✅ BEST PRACTICE: Base input styling using Tailwind's @layer system
   This ensures proper dark mode support without !important hacks */
@layer base {
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  textarea,
  select {
    @apply bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 placeholder-gray-500 dark:placeholder-gray-400 border-gray-300 dark:border-gray-600;
  }
  
  /* Focus states for better accessibility */
  input[type="text"]:focus,
  input[type="email"]:focus,
  input[type="password"]:focus,
  input[type="number"]:focus,
  textarea:focus,
  select:focus {
    @apply ring-2 ring-blue-500 border-blue-500 outline-none;
  }
}

/* ✅ FIXED: ReactMarkdown content styling in dark mode */
.prose-blue.dark\:prose-invert {
  @apply text-gray-200;
}

/* ✅ FIXED: Ensure proper text contrast in all modes */
.prose-blue.dark\:prose-invert h1,
.prose-blue.dark\:prose-invert h2,
.prose-blue.dark\:prose-invert h3,
.prose-blue.dark\:prose-invert h4,
.prose-blue.dark\:prose-invert h5,
.prose-blue.dark\:prose-invert h6 {
  @apply text-gray-100;
}

.prose-blue.dark\:prose-invert strong {
  @apply text-gray-100;
}

.prose-blue.dark\:prose-invert code {
  @apply bg-gray-800 text-gray-200 px-1 py-0.5 rounded;
}

/* ✅ FIXED: Better button focus states */
button:focus-visible {
  @apply outline-2 outline-offset-2 outline-blue-500;
}

/* ✅ OPTIMIZED: Smooth transitions for theme switching */
* {
  transition: background-color 0.2s ease, color 0.2s ease, border-color 0.2s ease;
}

/* ✅ FIXED: Ensure proper contrast for disabled elements */
input:disabled,
textarea:disabled,
button:disabled {
  @apply opacity-50 cursor-not-allowed;
}

@media (prefers-color-scheme: dark) {
  input:disabled,
  textarea:disabled {
    @apply bg-gray-900 text-gray-500;
  }
}

/* ✅ NEW: CRITICAL BACKDROP-BLUR FIX */
/* Ensure backdrop-blur support across all browsers */
@supports (backdrop-filter: blur(10px)) {
  .backdrop-blur-xs {
    backdrop-filter: blur(2px);
    -webkit-backdrop-filter: blur(2px);
  }
  .backdrop-blur-sm {
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
  }
  .backdrop-blur {
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  }
  .backdrop-blur-md {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
  }
  .backdrop-blur-lg {
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
  }
  .backdrop-blur-xl {
    backdrop-filter: blur(24px);
    -webkit-backdrop-filter: blur(24px);
  }
  .backdrop-blur-2xl {
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
  }
  .backdrop-blur-3xl {
    backdrop-filter: blur(64px);
    -webkit-backdrop-filter: blur(64px);
  }
}

/* ✅ NEW: Fallback for browsers without backdrop-filter support */
@supports not (backdrop-filter: blur(10px)) {
  .backdrop-blur-xs,
  .backdrop-blur-sm,
  .backdrop-blur,
  .backdrop-blur-md,
  .backdrop-blur-lg,
  .backdrop-blur-xl,
  .backdrop-blur-2xl,
  .backdrop-blur-3xl {
    background-color: rgba(255, 255, 255, 0.95) !important;
  }
  
  @media (prefers-color-scheme: dark) {
    .backdrop-blur-xs,
    .backdrop-blur-sm,
    .backdrop-blur,
    .backdrop-blur-md,
    .backdrop-blur-lg,
    .backdrop-blur-xl,
    .backdrop-blur-2xl,
    .backdrop-blur-3xl {
      background-color: rgba(17, 24, 39, 0.95) !important;
    }
  }
}

/* ✅ NEW: Enhanced navbar backdrop styling */
.navbar-backdrop {
  backdrop-filter: blur(24px) saturate(180%);
  -webkit-backdrop-filter: blur(24px) saturate(180%);
  background-color: rgba(255, 255, 255, 0.8);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@media (prefers-color-scheme: dark) {
  .navbar-backdrop {
    background-color: rgba(17, 24, 39, 0.8);
    border: 1px solid rgba(75, 85, 99, 0.3);
  }
}

/* ✅ NEW: Glassmorphism effect for modern UI elements */
.glass-effect {
  backdrop-filter: blur(16px) saturate(180%);
  -webkit-backdrop-filter: blur(16px) saturate(180%);
  background-color: rgba(255, 255, 255, 0.75);
  border: 1px solid rgba(209, 213, 219, 0.3);
}

@media (prefers-color-scheme: dark) {
  .glass-effect {
    background-color: rgba(31, 41, 55, 0.75);
    border: 1px solid rgba(75, 85, 99, 0.3);
  }
}

/* ✅ NEW: Fix for WebKit browsers backdrop-filter bug */
@media screen and (-webkit-min-device-pixel-ratio: 0) {
  .backdrop-blur-xl {
    backdrop-filter: blur(24px) !important;
    -webkit-backdrop-filter: blur(24px) !important;
  }
}
/* ✅ ENHANCED: Better bouncing animation for circles */
.animate-optimized-bounce {
  animation: optimized-bounce 8s ease-in-out infinite;
}

@keyframes optimized-bounce {
  0%, 20%, 50%, 80%, 100% {
    transform: translateY(0) translateX(0);
  }
  10% {
    transform: translateY(-15px) translateX(5px);
  }
  30% {
    transform: translateY(-8px) translateX(-3px);
  }
  60% {
    transform: translateY(-12px) translateX(8px);
  }
  70% {
    transform: translateY(-5px) translateX(-2px);
  }
}

/* ✅ Different speeds for variety */
.animate-optimized-bounce:nth-child(2) {
  animation-duration: 10s;
}

.animate-optimized-bounce:nth-child(3) {
  animation-duration: 12s;
}

.animate-optimized-bounce:nth-child(4) {
  animation-duration: 9s;
}

.animate-optimized-bounce:nth-child(5) {
  animation-duration: 11s;
}
